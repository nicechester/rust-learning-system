<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Methods That Produce Other Iterators</title>
</head>
<body>
<h1>Methods That Produce Other Iterators</h1>
<p><em>Iterator adapters</em> are methods defined on the <code>Iterator</code> trait that don’t
consume the iterator. Instead, they produce different iterators by changing
some aspect of the original iterator.</p>
<p>Listing 13-14 shows an example of calling the iterator adapter method <code>map</code>,
which takes a closure to call on each item as the items are iterated through.
The <code>map</code> method returns a new iterator that produces the modified items. The
closure here creates a new iterator in which each item from the vector will be
incremented by 1.</p>
<p><Listing number="13-14" file-name="src/main.rs" caption="Calling the iterator adapter <code>map</code> to create a new iterator"></p>
<p>```rust,not_desired_behavior
{{#rustdoc_include ../listings/ch13-functional-features/listing-13-14/src/main.rs:here}}</p>
<pre><code>
&lt;/Listing&gt;

However, this code produces a warning:

```console
{{#include ../listings/ch13-functional-features/listing-13-14/output.txt}}
</code></pre>
<p>The code in Listing 13-14 doesn’t do anything; the closure we’ve specified
never gets called. The warning reminds us why: Iterator adapters are lazy, and
we need to consume the iterator here.</p>
<p>To fix this warning and consume the iterator, we’ll use the <code>collect</code> method,
which we used with <code>env::args</code> in Listing 12-1. This method consumes the
iterator and collects the resultant values into a collection data type.</p>
<p>In Listing 13-15, we collect the results of iterating over the iterator that’s
returned from the call to <code>map</code> into a vector. This vector will end up
containing each item from the original vector, incremented by 1.</p>
<p><Listing number="13-15" file-name="src/main.rs" caption="Calling the <code>map</code> method to create a new iterator, and then calling the <code>collect</code> method to consume the new iterator and create a vector"></p>
<pre><code class="language-rust">{{#rustdoc_include ../listings/ch13-functional-features/listing-13-15/src/main.rs:here}}
</code></pre>
<p></Listing></p>
<p>Because <code>map</code> takes a closure, we can specify any operation we want to perform
on each item. This is a great example of how closures let you customize some
behavior while reusing the iteration behavior that the <code>Iterator</code> trait
provides.</p>
<p>You can chain multiple calls to iterator adapters to perform complex actions in
a readable way. But because all iterators are lazy, you have to call one of the
consuming adapter methods to get results from calls to iterator adapters.</p>
<!-- Old headings. Do not remove or links may break. -->

<p><a id="using-closures-that-capture-their-environment"></a></p>
</body>
</html>