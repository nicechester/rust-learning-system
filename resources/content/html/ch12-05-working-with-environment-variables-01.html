<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Writing a Failing Test for Case-Insensitive Search</title>
</head>
<body>
<h1>Writing a Failing Test for Case-Insensitive Search</h1>
<p>We first add a new <code>search_case_insensitive</code> function to the <code>minigrep</code> library
that will be called when the environment variable has a value. We’ll continue
to follow the TDD process, so the first step is again to write a failing test.
We’ll add a new test for the new <code>search_case_insensitive</code> function and rename
our old test from <code>one_result</code> to <code>case_sensitive</code> to clarify the differences
between the two tests, as shown in Listing 12-20.</p>
<p><Listing number="12-20" file-name="src/lib.rs" caption="Adding a new failing test for the case-insensitive function we’re about to add"></p>
<p><code>rust,ignore,does_not_compile
{{#rustdoc_include ../listings/ch12-an-io-project/listing-12-20/src/lib.rs:here}}</code></p>
<p></Listing></p>
<p>Note that we’ve edited the old test’s <code>contents</code> too. We’ve added a new line
with the text <code>"Duct tape."</code> using a capital <em>D</em> that shouldn’t match the query
<code>"duct"</code> when we’re searching in a case-sensitive manner. Changing the old test
in this way helps ensure that we don’t accidentally break the case-sensitive
search functionality that we’ve already implemented. This test should pass now
and should continue to pass as we work on the case-insensitive search.</p>
<p>The new test for the case-<em>insensitive</em> search uses <code>"rUsT"</code> as its query. In
the <code>search_case_insensitive</code> function we’re about to add, the query <code>"rUsT"</code>
should match the line containing <code>"Rust:"</code> with a capital <em>R</em> and match the
line <code>"Trust me."</code> even though both have different casing from the query. This
is our failing test, and it will fail to compile because we haven’t yet defined
the <code>search_case_insensitive</code> function. Feel free to add a skeleton
implementation that always returns an empty vector, similar to the way we did
for the <code>search</code> function in Listing 12-16 to see the test compile and fail.</p>
</body>
</html>